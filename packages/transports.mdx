---
title: "@mcp-b/transports"
description: "Browser-specific MCP transport implementations for tab and extension communication"
sidebarTitle: "Transports"
icon: "arrows-rotate"
---

## Overview

The `@mcp-b/transports` package provides browser-specific transport implementations for the Model Context Protocol (MCP). It enables communication between MCP servers/clients in browser tabs and Chrome extensions.

## Installation

```bash
npm install @mcp-b/transports
```

## Transport Types

### TabServerTransport

Used by MCP servers running in browser tabs to accept connections.

```typescript
import { TabServerTransport } from '@mcp-b/transports';
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';

// Create MCP server
const server = new McpServer({
  name: 'PersonalAIWebsite',
  version: '1.0.0',
});

// Create transport with allowed origins
const transport = new TabServerTransport({
  allowedOrigins: ['*'] // Or specify specific origins for security
});

// Connect server to transport
await server.connect(transport);
```

### TabClientTransport

Used by MCP clients to connect to servers in the same browser context.

```typescript
import { TabClientTransport } from '@mcp-b/transports';
import { Client } from '@modelcontextprotocol/sdk/client/index.js';

// Create transport targeting current origin
const transport = new TabClientTransport({
  targetOrigin: window.location.origin
});

// Create and connect MCP client
const client = new Client({
  name: 'web-client',
  version: '1.0.0'
}, {
  capabilities: {}
});

await client.connect(transport);
```

### ExtensionClientTransport

Used to communicate with Chrome extensions that expose MCP servers.

```typescript
import { ExtensionClientTransport } from '@mcp-b/transports';
import { Client } from '@modelcontextprotocol/sdk/client/index.js';

// Create transport for extension communication
const transport = new ExtensionClientTransport({
  extensionId: 'your-target-extension-id',
  portName: 'mcp' // Optional, defaults to 'mcp'
});

// Connect client
const client = new Client({
  name: 'extension-connector',
  version: '1.0.0'
}, {
  capabilities: {}
});

await client.connect(transport);
```

## Real-World Examples

### Counter Application (Vanilla TypeScript)

From the [vanilla-ts example](https://github.com/WebMCP-org/examples/tree/main/vanilla-ts):

```typescript
import { TabServerTransport } from '@mcp-b/transports';
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import z from 'zod';

const server = new McpServer({
  name: 'PersonalAIWebsite',
  version: '1.0.0',
});

// Register tools with the server
server.addTool({
  name: 'incrementCounter',
  description: 'Increment the counter',
  inputSchema: z.object({}),
  handler: async () => {
    counter++;
    updateDisplay();
    return {
      content: [{ 
        type: 'text', 
        text: `Counter incremented to ${counter}` 
      }]
    };
  }
});

// Set up transport
const transport = new TabServerTransport({
  allowedOrigins: ['*']
});

// Connect and start serving
await server.connect(transport);
console.log('MCP Server running in browser tab');
```

### React Flow Voice Agent

From the [ReactFlowVoiceAgent example](https://github.com/WebMCP-org/examples/tree/main/ReactFlowVoiceAgent):

```typescript
import { TabClientTransport } from '@mcp-b/transports';

async function mcpConnect() {
  // Create transport for same-origin communication
  const transport = new TabClientTransport({
    targetOrigin: window.location.origin
  });
  
  // Use with MCP client
  const client = new Client({
    name: 'voice-agent',
    version: '1.0.0'
  }, {
    capabilities: {}
  });
  
  await client.connect(transport);
  
  // Now you can list and call tools
  const tools = await client.listTools();
  console.log('Available tools:', tools);
}
```

### Chrome Extension Connector

From the [extension-connector example](https://github.com/WebMCP-org/examples/tree/main/extension-connector):

```typescript
import { ExtensionClientTransport } from '@mcp-b/transports';

const TARGET_EXTENSION_ID = 'your-mcp-extension-id';
const PORT_NAME = 'mcp';

async function connectToMcpExtension() {
  // Create transport for extension
  const transport = new ExtensionClientTransport({
    extensionId: TARGET_EXTENSION_ID,
    portName: PORT_NAME,
  });
  
  const client = new Client({
    name: 'extension-client',
    version: '1.0.0'
  }, {
    capabilities: {}
  });
  
  try {
    await client.connect(transport);
    console.log('Connected to MCP extension');
    
    // List available tools from extension
    const tools = await client.listTools();
    return { client, tools };
  } catch (error) {
    console.error('Failed to connect:', error);
    throw error;
  }
}
```

## Configuration Options

### TabServerTransport Options

| Option | Type | Required | Description |
|--------|------|----------|-------------|
| `allowedOrigins` | `string[]` | Yes | Array of allowed origins or `['*']` for all |

### TabClientTransport Options

| Option | Type | Required | Description |
|--------|------|----------|-------------|
| `targetOrigin` | `string` | Yes | Origin of the target window (usually `window.location.origin`) |

### ExtensionClientTransport Options

| Option | Type | Required | Description |
|--------|------|----------|-------------|
| `extensionId` | `string` | Yes | Chrome extension ID to connect to |
| `portName` | `string` | No | Port name for connection (default: 'mcp') |

## Usage with MCP SDK

This package is designed to work with the official MCP SDK:

```typescript
import { TabServerTransport } from '@mcp-b/transports';
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';

// Or for clients:
import { TabClientTransport } from '@mcp-b/transports';
import { Client } from '@modelcontextprotocol/sdk/client/index.js';
```

## TypeScript Support

Full TypeScript definitions are included. The transports implement the standard MCP transport interfaces:

```typescript
interface Transport {
  // Implementation details handled by the transport
  start(): Promise<void>;
  send(message: JSONRPCMessage): Promise<void>;
  close(): Promise<void>;
}
```

## Browser Compatibility

- Chrome/Chromium: Full support
- Firefox: Tab transports supported, extension transport requires adaptation
- Safari: Tab transports supported, no extension support
- Edge: Full support (Chromium-based)

## Security Considerations

### CORS and Origins

When using `TabServerTransport`, always specify explicit allowed origins in production:

```typescript
// ❌ Don't use wildcards in production
const transport = new TabServerTransport({
  allowedOrigins: ['*']
});

// ✅ Specify exact origins
const transport = new TabServerTransport({
  allowedOrigins: [
    'https://myapp.com',
    'https://app.myapp.com'
  ]
});
```

### Extension Permissions

When using `ExtensionClientTransport`, ensure your extension manifest includes appropriate permissions:

```json
{
  "permissions": ["tabs", "scripting"],
  "host_permissions": ["<all_urls>"],
  "externally_connectable": {
    "matches": ["*://*.yourdomain.com/*"]
  }
}
```

## Related Packages

- [@modelcontextprotocol/sdk](https://www.npmjs.com/package/@modelcontextprotocol/sdk) - Official MCP SDK
- [@mcp-b/web-tools](https://www.npmjs.com/package/@mcp-b/web-tools) - MCP tools for web APIs
- [@mcp-b/mcp-react-hooks](/packages/react-hooks) - React hooks for MCP integration

## Resources

- [GitHub Repository](https://github.com/WebMCP-org/npm-packages)
- [Working Examples](https://github.com/WebMCP-org/examples)
- [MCP Protocol Specification](https://modelcontextprotocol.io)
- [Chrome Extension Development](https://developer.chrome.com/docs/extensions)