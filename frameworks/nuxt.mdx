---
title: 'Nuxt Integration'
description: 'Integrate WebMCP tools with Nuxt 3. Handle SSR/SSG patterns with client-only plugins and composables for full-stack Vue applications.'
icon: 'n'
---

## Overview

Nuxt 3's SSR requires ensuring WebMCP code only runs on the client. This guide covers Nuxt-specific patterns.

<Info>
  **Prerequisites**: Install `@mcp-b/global` per the [Global Package docs](/packages/global). For the base Vue pattern, see [Vue Integration](/frameworks/vue).
</Info>

## Client-Only Plugin

Create a Nuxt plugin that initializes WebMCP client-side:

```typescript "plugins/webmcp.client.ts"
import '@mcp-b/global';

export default defineNuxtPlugin(() => {
  // .client.ts suffix ensures this only runs in browser
});
```

## Nuxt Composable

SSR-safe tool registration:

```typescript "composables/useWebMCP.ts"
interface ToolConfig {
  name: string;
  description: string;
  inputSchema?: Record<string, unknown>;
  handler: (args: Record<string, unknown>) => Promise<unknown>;
}

export function useWebMCP(config: ToolConfig): void {
  let registration: { unregister: () => void } | null = null;

  if (import.meta.client) {
    onMounted(() => {
      if (!('modelContext' in navigator)) return;

      registration = navigator.modelContext.registerTool({
        name: config.name,
        description: config.description,
        inputSchema: config.inputSchema ?? { type: 'object', properties: {} },
        async execute(args) {
          const result = await config.handler(args);
          return {
            content: [{
              type: 'text',
              text: typeof result === 'string' ? result : JSON.stringify(result)
            }]
          };
        }
      });
    });

    onUnmounted(() => {
      registration?.unregister();
    });
  }
}
```

<Note>
  `import.meta.client` is Nuxt 3's way to conditionally run code only on the client.
</Note>

## Using with Server Data

```vue "pages/products/[id].vue"
<script setup lang="ts">
const route = useRoute();
const { data: product } = await useFetch(`/api/products/${route.params.id}`);

useWebMCP({
  name: 'get_current_product',
  description: 'Get details about the currently viewed product',
  handler: async () => {
    if (!product.value) return { error: 'No product loaded' };
    return {
      id: product.value.id,
      name: product.value.name,
      price: product.value.price
    };
  }
});
</script>

<template>
  <div v-if="product">
    <h1>{{ product.name }}</h1>
  </div>
</template>
```

## ClientOnly Wrapper

```vue "app.vue"
<template>
  <div>
    <ClientOnly>
      <GlobalTools />
    </ClientOnly>
    <NuxtPage />
  </div>
</template>
```

## Global Tools in Layout

```vue "layouts/default.vue"
<script setup lang="ts">
if (import.meta.client) {
  useWebMCP({
    name: 'get_user_session',
    description: 'Get current user session info',
    handler: async () => {
      const { data } = useAuth();
      return { isLoggedIn: !!data.value, user: data.value?.user ?? null };
    }
  });
}
</script>

<template>
  <div>
    <header>
      <NuxtLink to="/">Home</NuxtLink>
    </header>
    <main>
      <slot />
    </main>
  </div>
</template>
```

## Pinia Integration

```typescript "stores/cart.ts"
export const useCartStore = defineStore('cart', {
  state: () => ({
    items: [] as Array<{ id: string; quantity: number }>
  }),
  getters: {
    totalItems: (state) => state.items.reduce((sum, i) => sum + i.quantity, 0)
  },
  actions: {
    addItem(id: string, quantity: number) {
      const existing = this.items.find(i => i.id === id);
      if (existing) existing.quantity += quantity;
      else this.items.push({ id, quantity });
    }
  }
});
```

```vue "components/CartTools.vue"
<script setup lang="ts">
const cart = useCartStore();

useWebMCP({
  name: 'cart_add',
  description: 'Add item to cart',
  inputSchema: {
    type: 'object',
    properties: {
      productId: { type: 'string' },
      quantity: { type: 'number' }
    },
    required: ['productId']
  },
  handler: async ({ productId, quantity = 1 }) => {
    cart.addItem(productId as string, quantity as number);
    return { totalItems: cart.totalItems };
  }
});
</script>
```

## Common Gotchas

<AccordionGroup>
  <Accordion title="'navigator is not defined' error">
    Code is running during SSR. Use one of:
    - `import.meta.client` check
    - `.client.ts` suffix for plugins
    - `<ClientOnly>` component
    - `onMounted` lifecycle hook
  </Accordion>

  <Accordion title="Tools disappear after navigation">
    Ensure the component registering tools persists across routes (e.g., in `app.vue` or a layout).
  </Accordion>

  <Accordion title="Hydration mismatch warnings">
    Wrap client-only UI in `<ClientOnly>`:

    ```vue
    <ClientOnly>
      <ToolRegistrationComponent />
      <template #fallback>Loading...</template>
    </ClientOnly>
    ```
  </Accordion>
</AccordionGroup>

## Resources

<CardGroup cols={2}>
  <Card title="Nuxt 3 Docs" icon="book" href="https://nuxt.com/docs">
    Official Nuxt 3 documentation
  </Card>

  <Card title="Vue Integration" icon="vuejs" href="/frameworks/vue">
    Base Vue patterns
  </Card>

  <Card title="Tool Registration" icon="wrench" href="/concepts/tool-registration">
    Full registerTool API
  </Card>

  <Card title="Schemas" icon="brackets-curly" href="/concepts/schemas">
    Input validation
  </Card>
</CardGroup>
