---
title: 'Svelte & SvelteKit Integration'
description: 'Integrate WebMCP tools with Svelte and SvelteKit.'
icon: 'code'
---

<Info>
**Prerequisites**: Install `@mcp-b/global` per the [Global Package docs](/packages/global). For the full API, see [Tool Registration](/concepts/tool-registration).
</Info>

## Basic Usage (Svelte 5)

```svelte
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import '@mcp-b/global';

  let count = $state(0);
  let reg: { unregister: () => void } | null = null;

  onMount(() => {
    reg = navigator.modelContext.registerTool({
      name: 'increment',
      description: 'Increment the counter',
      inputSchema: {
        type: 'object',
        properties: {
          amount: { type: 'number' }
        }
      },
      async execute({ amount = 1 }) {
        count += amount as number;
        return { content: [{ type: 'text', text: `Count: ${count}` }] };
      }
    });
  });

  onDestroy(() => reg?.unregister());
</script>

<p>Count: {count}</p>
```

## SvelteKit (SSR-Safe)

Use the `browser` check for SvelteKit:

```svelte "+page.svelte"
<script lang="ts">
  import { browser } from '$app/environment';
  import { onMount, onDestroy } from 'svelte';
  import '@mcp-b/global';

  export let data;
  let reg: { unregister: () => void } | null = null;

  onMount(() => {
    if (!browser) return;

    reg = navigator.modelContext.registerTool({
      name: 'search',
      description: 'Search loaded data',
      inputSchema: {
        type: 'object',
        properties: { query: { type: 'string' } },
        required: ['query']
      },
      async execute({ query }) {
        const results = data.items.filter(i =>
          i.name.toLowerCase().includes((query as string).toLowerCase())
        );
        return { content: [{ type: 'text', text: JSON.stringify(results) }] };
      }
    });
  });

  onDestroy(() => reg?.unregister());
</script>
```

## Using Actions

Svelte actions can encapsulate tool registration:

```typescript "lib/actions/webmcp.ts"
import '@mcp-b/global';

export function webmcp(node: HTMLElement, tool: Parameters<typeof navigator.modelContext.registerTool>[0]) {
  const reg = navigator.modelContext.registerTool(tool);
  return { destroy: () => reg.unregister() };
}
```

```svelte
<script lang="ts">
  import { webmcp } from '$lib/actions/webmcp';
</script>

<div use:webmcp={{
  name: 'my_tool',
  description: 'My tool',
  inputSchema: { type: 'object', properties: {} },
  async execute() {
    return { content: [{ type: 'text', text: 'Done' }] };
  }
}}>
  Content
</div>
```

## Layout-Level Tools

Register in `+layout.svelte` for persistence across routes:

```svelte "+layout.svelte"
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { goto } from '$app/navigation';
  import '@mcp-b/global';

  let reg: { unregister: () => void } | null = null;

  onMount(() => {
    reg = navigator.modelContext.registerTool({
      name: 'navigate',
      description: 'Navigate to a page',
      inputSchema: {
        type: 'object',
        properties: { path: { type: 'string' } },
        required: ['path']
      },
      async execute({ path }) {
        await goto(path as string);
        return { content: [{ type: 'text', text: `Navigated to ${path}` }] };
      }
    });
  });

  onDestroy(() => reg?.unregister());
</script>

<slot />
```

## Common Gotchas

<AccordionGroup>
  <Accordion title="'navigator is not defined' during SSR">
    Use the `browser` check:
    ```typescript
    import { browser } from '$app/environment';
    if (browser) { /* safe to use navigator */ }
    ```
  </Accordion>

  <Accordion title="Tools disappear after navigation">
    Move registration to `+layout.svelte` for persistence.
  </Accordion>
</AccordionGroup>
